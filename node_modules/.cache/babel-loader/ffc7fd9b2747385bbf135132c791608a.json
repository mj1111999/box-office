{"ast":null,"code":"var _jsxFileName = \"D:\\\\Sem 7\\\\Internshala\\\\The Box Office\\\\src\\\\pages\\\\Show.js\";\nimport React, { useEffect, useReducer } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Details from '../components/show/Details';\nimport Seasons from '../components/show/Seasons';\nimport Cast from '../components/show/Cast';\nimport ShowMainData from '../components/show/ShowMainData';\nimport { apiGet } from '../misc/config';\n\nconst reducer = (prevState, action) => {\n  switch (action.type) {\n    case 'FETCH_SUCCESS':\n      {\n        return {\n          isLoading: false,\n          error: null,\n          show: action.show\n        };\n      }\n\n    case 'FETCH_FAILED':\n      {\n        return { ...prevState,\n          isLoading: false,\n          error: action.error\n        };\n      }\n\n    default:\n      return prevState;\n  }\n};\n\nconst initialState = {\n  show: null,\n  isLoading: true,\n  error: null\n};\n\nconst Show = () => {\n  const {\n    id\n  } = useParams();\n  const [{\n    show,\n    isLoading,\n    error\n  }, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    let isMounted = true;\n    apiGet(`/shows//${id}?embed[]=seasons&embed[]=cast`).then(results => {\n      if (isMounted) {\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          show: results\n        });\n      }\n    }).catch(err => {\n      if (isMounted) {\n        dispatch({\n          type: 'FETCH_FAILED',\n          error: err.message\n        });\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [id]);\n  console.log('show', show);\n  console.log('isLoading', isLoading);\n\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 12\n      }\n    }, \"Data is being loaded\");\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ShowMainData, {\n    image: show.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Details\"), /*#__PURE__*/React.createElement(Details, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, \"Seasons\"), /*#__PURE__*/React.createElement(Seasons, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, \"Cast\"), /*#__PURE__*/React.createElement(Cast, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  })));\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 12\n      }\n    }, \"Error Occured: \", error);\n  }\n};\n\nexport default Show;","map":{"version":3,"sources":["D:/Sem 7/Internshala/The Box Office/src/pages/Show.js"],"names":["React","useEffect","useReducer","useParams","Details","Seasons","Cast","ShowMainData","apiGet","reducer","prevState","action","type","isLoading","error","show","initialState","Show","id","dispatch","isMounted","then","results","catch","err","message","console","log","image"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer } from 'react';\r\n\r\nimport { useParams } from 'react-router-dom';\r\nimport Details from '../components/show/Details';\r\nimport Seasons from '../components/show/Seasons';\r\nimport Cast from '../components/show/Cast';\r\nimport ShowMainData from '../components/show/ShowMainData';\r\nimport { apiGet } from '../misc/config';\r\n\r\nconst reducer = (prevState, action) => {\r\n  switch (action.type) {\r\n    case 'FETCH_SUCCESS': {\r\n      return { isLoading: false, error: null, show: action.show };\r\n    }\r\n\r\n    case 'FETCH_FAILED': {\r\n      return { ...prevState, isLoading: false, error: action.error };\r\n    }\r\n\r\n    default:\r\n      return prevState;\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  show: null,\r\n  isLoading: true,\r\n  error: null,\r\n};\r\n\r\nconst Show = () => {\r\n  const { id } = useParams();\r\n\r\n  const [{ show, isLoading, error }, dispatch] = useReducer(\r\n    reducer,\r\n    initialState\r\n  );\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    apiGet(`/shows//${id}?embed[]=seasons&embed[]=cast`)\r\n      .then(results => {\r\n        if (isMounted) {\r\n          dispatch({ type: 'FETCH_SUCCESS', show: results });\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (isMounted) {\r\n          dispatch({ type: 'FETCH_FAILED', error: err.message });\r\n        }\r\n      });\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [id]);\r\n  console.log('show', show);\r\n  console.log('isLoading', isLoading);\r\n  if (isLoading) {\r\n    return <div>Data is being loaded</div>;\r\n  }\r\n  return (\r\n    <div>\r\n      <ShowMainData image={show.image} />\r\n      <div>\r\n        <h2>Details</h2>\r\n        <Details />\r\n      </div>\r\n      <div>\r\n        <h2>Seasons</h2>\r\n        <Seasons />\r\n      </div>\r\n      <div>\r\n        <h2>Cast</h2>\r\n        <Cast />\r\n      </div>\r\n    </div>\r\n  );\r\n  if (error) {\r\n    return <div>Error Occured: {error}</div>;\r\n  }\r\n};\r\nexport default Show;\r\n"]},"metadata":{},"sourceType":"module"}